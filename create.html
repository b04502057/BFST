<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Create Account</title>
</head>
<body>
  <div style="text-align: center;">
    <h1>Create Account</h1>
    Email: <input type="email" id="email" placeholder="Email" /> <br><br>
    Password: <input type="password" id="password" placeholder="Password" /> <br><br>
    <h2>OATH</h2>
    I are one of the team <br><br>I will never leak information in this group to any girlfriend <br><br>
    I am proud of helping each other <br> <br>
    We boy friends may make mistakes, <br><br> but we never give up <br><br><br>
    <button onclick="register()">Register</button>
  </div>
  

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword , sendEmailVerification} from "https://www.gstatic.com/firebasejs/11.9.1/firebase-auth.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-analytics.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAdr9fZQiSGqzNmoywgVFTCyf7pvQ6QxC8",
      authDomain: "bfst-f3483.firebaseapp.com",
      projectId: "bfst-f3483",
      storageBucket: "bfst-f3483.appspot.com",
      messagingSenderId: "141115663587",
      appId: "1:141115663587:web:b36386b5a1bf0f934d51d6",
      measurementId: "G-XS7MJ0XHD2"
    };

    // 初始化 Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);

    // 註冊函式
    window.register = function () {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      createUserWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
        const user = userCredential.user;

        sendEmailVerification(user)
          .then(() => {
            alert("Registration successful! A verification email has been sent. Please check your inbox and click the link to complete your registration.");
            window.location.href = "index.html";
          })
          .catch((error) => {
            alert("Fail to send verification letter：" + error.message);
          });
      })
      .catch((error) => {
        alert("Registration failed:" + error.message);
      });

        
    }
  </script>
</body>
</html>
